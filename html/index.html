<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>山东大学校园助手 </title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="all,follow">
    <!-- Bootstrap CSS-->
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="vendor/font-awesome/css/font-awesome.min.css">
    <!-- Fontastic Custom icon font-->
    <link rel="stylesheet" href="css/fontastic.css">
    <!-- Google fonts - Poppins -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,700">
    <!-- theme stylesheet-->
    <link rel="stylesheet" href="css/style.default.css" id="theme-stylesheet">
    <!-- Custom stylesheet - for your changes-->
    <link rel="stylesheet" href="css/custom.css">
    <!-- Favicon-->
    <link rel="shortcut icon" href="img/favicon.ico">
    <!-- Tweaks for older IEs-->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]-->
</head>

<body>
    <div class="page">
        <!-- Main Navbar-->
        <header class="header">
            <nav class="navbar">
                <!-- Search Box-->
                <div class="search-box">
                    <button class="dismiss"><i class="icon-close"></i></button>
                    <form id="searchForm" action="#" role="search">
                        <input type="search" placeholder="What are you looking for..." class="form-control">
                    </form>
                </div>
                <div class="container-fluid">
                    <div class="navbar-holder d-flex align-items-center justify-content-between">
                        <!-- Navbar Header-->
                        <div class="navbar-header">
                            <!-- Navbar Brand -->
                            <a href="index.html" class="navbar-brand d-none d-sm-inline-block">
                                <div class="brand-text d-none d-lg-inline-block"><span>山东大学 </span><strong>计算机科学与技术学院</strong></div>
                                <div class="brand-text d-none d-sm-inline-block d-lg-none"><strong>山大计科</strong></div>
                            </a>
                            <!-- Toggle Button--><a id="toggle-btn" href="#" class="menu-btn active"><span></span><span></span><span></span></a>
                        </div>
                        <!-- Navbar Menu -->
                        <ul class="nav-menu list-unstyled d-flex flex-md-row align-items-md-center">
                            <!-- Search-->
                            <li class="nav-item d-flex align-items-center"><a id="search" href="#"><i class="icon-search"></i></a>
                            </li>
                            <!-- Logout    -->
                            <li class="nav-item">
                                <a href="login.html" class="nav-link logout"> <span class="d-none d-sm-inline">Logout</span><i class="fa fa-sign-out"></i></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
        <div class="page-content d-flex align-items-stretch">
            <!-- Side Navbar -->
            <nav class="side-navbar">
                <!-- Sidebar Header-->
                <div class="sidebar-header d-flex align-items-center">
                    <div class="avatar" ><a href = "userinfo.html"><img id ="userimage" alt="..." class="img-fluid rounded-circle"></a></div>
                    <div class="title">
                        <h1 id="username" class="h4">刘千一</h1>
                        <p id="classname">计科18.4班</p>
                    </div>
                </div>
                <!-- Sidebar Navidation Menus--><span class="heading"></span>
                <ul class="list-unstyled">
                    <li class="active">
                        <a href="index.html"> <i class="icon-home"></i>主界面 </a>
                    </li>
                    <li>
                        <a href="tables.html"> <i class="icon-grid"></i>选课 </a>
                    </li>
                    <li>
                        <a href="Discuss.html"> <i class="fa fa-bar-chart"></i>讨论区 </a>
                    </li>
                    <li>
                        <a href="forms.html"> <i class="icon-padnote"></i>发布页面 </a>
                    </li>
                    <li>
                        <a href="#exampledropdownDropdown" aria-expanded="false" data-toggle="collapse"> <i class="icon-interface-windows"></i>功能 </a>
                        <ul id="exampledropdownDropdown" class="collapse list-unstyled ">
                            <li><a href="curriculum.html">课程表</a></li>
                             
                            <li><a href="activity.html">活动通知</a></li>
                            <li><a href="competition.html">比赛通知</a></li>
                            <li><a href="test.html">考试信息</a></li>
                            <li><a href="serchgrade.html">成绩查询</a></li>
                             
                        </ul>
                    </li>
                    <li>
                        <a href="login.html"> <i class="icon-interface-windows"></i>退出登录 </a>
                    </li>
                </ul>
            </nav>
            <div class="content-inner">
                <!-- Page Header-->
                <header class="page-header">
                    <div class="container-fluid">
                        <h2 class="no-margin-bottom">校园助手</h2>
                    </div>
                </header>
                <!-- Dashboard Counts Section-->
                <section class="dashboard-counts no-padding-bottom">
                    <div class="container-fluid">
                        <div class="row bg-white has-shadow">
                            <!-- Item -->
                            <div class="col-xl-3 col-sm-6">
                                <div class="item d-flex align-items-center">
                                    <div class="icon bg-violet"><i class="icon-user"></i></div>
                                    <div class="title"><span>今日<br>课程</span>
                                        <div class="progress">
                                            <div role="progressbar" style="width: 25%; height: 4px;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" class="progress-bar bg-violet"></div>
                                        </div>
                                    </div>
                                    <div class="number"><strong id="todayclass">0</strong></div>
                                </div>
                            </div>
                            <!-- Item -->
                            <div class="col-xl-3 col-sm-6">
                                <div class="item d-flex align-items-center">
                                    <div class="icon bg-red"><i class="icon-padnote"></i></div>
                                    <div class="title"><span>教务<br>通知</span>
                                        <div class="progress">
                                            <div role="progressbar" style="width: 70%; height: 4px;" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" class="progress-bar bg-red"></div>
                                        </div>
                                    </div>
                                    <div class="number"><strong>5</strong></div>
                                </div>
                            </div>
                            <!-- Item -->
                            <div class="col-xl-3 col-sm-6">
                                <div class="item d-flex align-items-center">
                                    <div class="icon bg-green"><i class="icon-bill"></i></div>
                                    <div class="title"><span>社交<br>动态</span>
                                        <div class="progress">
                                            <div role="progressbar" style="width: 40%; height: 4px;" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" class="progress-bar bg-green"></div>
                                        </div>
                                    </div>
                                    <div class="number"><strong id= "shejiaonum"></strong></div>
                                </div>
                            </div>
                            <!-- Item -->
                            <div class="col-xl-3 col-sm-6">
                                <div class="item d-flex align-items-center">
                                    <div class="icon bg-orange"><i class="icon-check"></i></div>
                                    <div class="title"><span>活动<br>信息</span>
                                        <div class="progress">
                                            <div role="progressbar" style="width: 50%; height: 4px;" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" class="progress-bar bg-orange"></div>
                                        </div>
                                    </div>
                                    <div class="number"><strong id= "actinum2"></strong></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- Dashboard Header Section    -->

                    <script src="js/jquery-3.4.1.min.js"></script>
                    <script type="text/javascript">
                        $(document).ready(function() {
							$.ajax({
                                type: 'GET',
                                url:'http://49.235.169.238:8000/api/userinfo/'+sessionStorage.getItem("userid"),
                                dataType:'JSON',
                                success:function (data) {
                                    sessionStorage.setItem("username",data.name);
                                    sessionStorage.setItem("usertype",data.type);
                                    sessionStorage.setItem("userclass",data.classroom);
                                    sessionStorage.setItem("usermajor",data.department_name);
									sessionStorage.setItem("useremail",data.email);
                                    sessionStorage.setItem("usernickname",data.nickname);
                                    sessionStorage.setItem("usersex",data.sex);
                                    sessionStorage.setItem("userage",data.age);
									sessionStorage.setItem("userperson_id",data.person_id);
									sessionStorage.setItem("userimage",data.image);
                                }

                            });
							document.getElementById("userimage").src = sessionStorage.getItem("userimage");
							document.getElementById("username").innerHTML = sessionStorage.getItem("username");
							document.getElementById("classname").innerHTML = sessionStorage.getItem("userclass");
						    $.ajax({
                                url: 'http://49.235.169.238:8000/api/todaycourse/'+sessionStorage.getItem("userid"),
                                type: 'GET',
                                dataType: 'JSON',
                                success: function(data) {

                                    document.getElementById("todayclass").innerHTML = data.num;

                                },
                                error: function() {


                                }
                            });
                            $.ajax({
                                url: 'http://49.235.169.238:8000/api/examnum',
                                type: 'GET',
                                dataType: 'JSON',
                                success: function(data) {

                                    document.getElementById("examnum").innerHTML = data.num;


                                    //data就是后台返回的值
                                },
                                error: function() {}
                            });
                            $.ajax({
                                url: 'http://49.235.169.238:8000/api/competitionnum',
                                type: 'GET',
                                dataType: 'JSON',
                                success: function(data) {

                                    document.getElementById("compnum").innerHTML = data.num;

                                },
                                error: function() {


                                }
                            });
                            $.ajax({
                                url: 'http://49.235.169.238:8000/api/activitynum',
                                type: 'GET',
                                dataType: 'JSON',
                                success: function(data) {

                                    document.getElementById("actinum").innerHTML = data.num;
									document.getElementById("actinum2").innerHTML = data.num;
                                },
                                error: function() {


                                }
                            });

                            $.ajax({
                                url: 'http://49.235.169.238:8000/api/gpa/'+sessionStorage.getItem("userid"),
                                type: 'GET',
                                dataType: 'JSON',
                                success: function(data) {

                                    document.getElementById("gradepa").innerHTML = data.gpa.toFixed(2);

                                },
                                error: function() {


                                }
                            });
                            $.ajax({
                                url: 'http://49.235.169.238:8000/api/gettestlist/'+sessionStorage.getItem("userid"),
                                type: 'POST',
                                dataType: 'JSON',
                                success: function(data) {
                                    for (var i = 0; i < data.result.length; i++) {
                                        var str = "";
                                        str += '<div class="project">' + '<div class="row bg-white has-shadow">' +
                                            '<div class="left-col col-lg-12 d-flex align-items-center justify-content-between">' +
                                            '<div class="project-title d-flex align-items-center">' +
                                            '<div class="image has-shadow"><img src="img/project-1.jpg" alt="..." class="img-fluid"></div>' +
                                            '<div class="text">' + '<h3 class="h4">' + data.result[i].classname + '</h3><small>' + data.result[i].address + '</small>' + '</div>' + '</div>' +
                                            '<div class="project-date"><span class="hidden-sm-down">' + data.result[i].time + '</span>' + '</div>' + '</div>' +
                                            '</div>'+'</div>';

                                        $('#Test').append(str);
                                    }
                                },
                                error: function() {


                                }
                            });
                            $.ajax({
                                url: 'http://49.235.169.238:8000/api/getactivitylist',
                                type: 'GET',
                                dataType: 'JSON',
                                success: function(data) {
                                    var str = "";
                                    for (var i = 0; i < data.result.length; i++) {
                                        str += '<div class="item">' +
                                            '<div class="row">' + '<div class="col-4 date-holder text-right">' + '<div class="icon"><i class="icon-clock"></i></div>' +
                                            '<div class="date">' + '<span>' + data.result[i].time + '</span><br></div>' + '</div>' + '<div class="col-8 content">' + '<h5>' + data.result[i].name + '</h5>' +
                                            '<p>' + data.result[i].info + '</p>' + '</div>' + '</div>' + '</div>';
                                    }
                                    $("#Activitylist").append(str);
                                },
                                error: function() {}
                            });
                            $.ajax({
                                url:'http://49.235.169.238:8000/api/totolcost/'+sessionStorage.getItem("userid"),
                                type:'GET',
                                dataType:'JSON',
                                success:function (data) {
                                    document.getElementById("totolcost").innerHTML=data.totolcost;
                                }
                            });
							$.ajax({
								url:'http://49.235.169.238:8000/comment/getDiscuss',
								type:'GET',
								dataType:'JSON',
								success:function (data) {
									var tot=data.num<10?data.num:10;
									document.getElementById("shejiaonum").innerHTML = tot;
									document.getElementById("discuss_num").innerHTML = tot +" new";
									for(var i=0;i<tot;i++){
											var str="";
											str+='<div class="item d-flex align-items-center">'+
                                                '<div class="image"><img src="'+data.result[i].img+'" alt="..." class="img-fluid rounded-circle"></div>'+
                                                '<div class="text">'+
                                                        '<h3 class="h5">'+data.result[i].text+'</h3>'+
                                                    '<small>'+'Posted on &ensp; '+data.result[i].time+'&ensp;by &ensp; '+data.result[i].username+'.</small></div>'+
                                            '</div>';
											$("#discuss_list").append(str);
									}
								}


                        });
					});
                    </script>
					<section class="projects no-padding-top">
                    </section>
                    <!-- Client Section-->
                    <section class="client no-padding-top">
                        <div class="container-fluid">
                            <div class="row">
                                <!-- Work Amount  -->
								<div class="col-lg-4">
                                    <div class="statistic d-flex align-items-center bg-white has-shadow">
                                        <div class="icon bg-red"><i class="fa fa-tasks"></i></div>
                                        <div class="text"><strong id="examnum">0</strong><br><small>考试数</small></div>
                                    </div>
                                    <div class="statistic d-flex align-items-center bg-white has-shadow">
                                        <div class="icon bg-green"><i class="fa fa-calendar-o"></i></div>
                                        <div class="text"><strong id="compnum">0</strong><br><small>比赛数</small></div>
                                    </div>
                                    <div class="statistic d-flex align-items-center bg-white has-shadow">
                                        <div class="icon bg-orange"><i class="fa fa-paper-plane-o"></i></div>
                                        <div class="text"><strong id="actinum">0</strong><br><small>活动数</small></div>
                                    </div>
                                </div>
                                <div class="col-lg-4">
                                    <div class="work-amount card">
                                        <div class="card-close">
                                            <div class="dropdown">
                                                <button type="button" id="closeCard1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle"><i class="fa fa-ellipsis-v"></i></button>
                                                <div aria-labelledby="closeCard1" class="dropdown-menu dropdown-menu-right has-shadow">
                                                    <a href="#" class="dropdown-item remove"> <i class="fa fa-times"></i>Close</a>
                                                    <a href="#" class="dropdown-item edit"> <i class="fa fa-gear"></i>Edit</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <h3>GPA</h3><small>平均学分绩点</small>
                                            <div class="chart text-center">
                                                <div class="text"><strong id="gradepa"></strong><br><span>/5.00</span></div>
                                                <canvas id="pieChart"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Total Overdue             -->
                                <div class="col-lg-4">
                                    <div class="overdue card">
                                        <div class="card-close">
                                            <div class="dropdown">
                                                <button type="button" id="closeCard3" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle"><i class="fa fa-ellipsis-v"></i></button>
                                                <div aria-labelledby="closeCard3" class="dropdown-menu dropdown-menu-right has-shadow">
                                                    <a href="#" class="dropdown-item remove"> <i class="fa fa-times"></i>Close</a>
                                                    <a href="#" class="dropdown-item edit"> <i class="fa fa-gear"></i>Edit</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <h3>本周校园卡消费</h3><small>消费金额.</small>
                                            <div id="totolcost" class="number text-center">￥200</div>
                                            <div class="chart">
                                                <canvas id="lineChart1"> </canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
					<!-- Projects Section-->
                    <section class="projects no-padding-top">
                        <div class="container-fluid" id="Test"></div>
                    </section>
                    <!-- Feeds Section-->
                    <section class="feeds no-padding-top">
                        <div class="container-fluid">
                            <div class="row">
                                <!-- Trending Articles-->
                                <div class="col-lg-12">
                                    <div class="articles card">
                                        <div class="card-close">
                                            <div class="dropdown">
                                                <button type="button" id="closeCard4" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle"><i class="fa fa-ellipsis-v"></i></button>
                                                <div aria-labelledby="closeCard4" class="dropdown-menu dropdown-menu-right has-shadow">
                                                    <a href="#" class="dropdown-item remove"> <i class="fa fa-times"></i>Close</a>
                                                    <a href="#" class="dropdown-item edit"> <i class="fa fa-gear"></i>Edit</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-header d-flex align-items-center">
                                            <h2 class="h3">交流区</h2>
                                            <div class="badge badge-rounded bg-green" id="discuss_num"></div>
                                        </div>
                                        <div class="card-body no-padding" id ="discuss_list"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <!-- Updates Section                                                -->
                    <section class="updates no-padding-top">
                        <div class="container-fluid">
                            <div class="row">
                                <!-- Recent Activities -->
                                <div class="col-lg-12">
                                    <div class="recent-activities card">
                                        <div class="card-close">
                                            <div class="dropdown">
                                                <button type="button" id="closeCard8" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="dropdown-toggle"><i class="fa fa-ellipsis-v"></i></button>
                                                <div aria-labelledby="closeCard8" class="dropdown-menu dropdown-menu-right has-shadow">
                                                    <a href="#" class="dropdown-item remove"> <i class="fa fa-times"></i>Close</a>
                                                    <a href="#" class="dropdown-item edit"> <i class="fa fa-gear"></i>Edit</a>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-header">
                                            <h3 class="h4">活动列表</h3>
                                        </div>
                                        <div class="card-body no-padding" id="Activitylist">


                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    <!-- Page Footer-->
                    <footer class="main-footer">
                        <div class="container-fluid">
                            <div class="row">
                                <div class="col-sm-6">
                                    <p>Shandong University &copy; 2019</p>
                                </div>
                                <div class="col-sm-6 text-right">
                                    <p>Design by Liu Qianyi,Hei Nailei,Yang Jiyuan </p>
                                    <!-- Please do not remove the backlink to us unless you support further theme's development at https://bootstrapious.com/donate. It is part of the license conditions. Thank you for understanding :)-->
                                </div>
                            </div>
                        </div>
                    </footer>
            </div>
        </div>
    </div>
    <!-- JavaScript files-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/popper.js/umd/popper.min.js">
    </script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="vendor/jquery.cookie/jquery.cookie.js">
    </script>
    <script src="vendor/chart.js/Chart.min.js"></script>
    <script src="vendor/jquery-validation/jquery.validate.min.js"></script>
    <script src="js/charts-home.js"></script>
    <!-- Main File-->
    <script src="js/front.js"></script>
</body>

</html>